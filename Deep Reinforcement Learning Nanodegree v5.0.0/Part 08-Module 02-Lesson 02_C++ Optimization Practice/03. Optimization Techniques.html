<!-- udacimak v1.4.4 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <title>
   Optimization Techniques
  </title>
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../assets/css/plyr.css" rel="stylesheet"/>
  <link href="../assets/css/katex.min.css" rel="stylesheet"/>
  <link href="../assets/css/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <link href="../assets/css/styles.css" rel="stylesheet"/>
  <link href="../assets/img/udacimak.png" rel="shortcut icon" type="image/png">
  </link>
 </head>
 <body>
  <div class="wrapper">
   <nav id="sidebar">
    <div class="sidebar-header">
     <h3>
      C++ Optimization Practice
     </h3>
    </div>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled components">
     <li class="">
      <a href="01. Introduction.html">
       01. Introduction
      </a>
     </li>
     <li class="">
      <a href="02. Software Development and Optimization.html">
       02. Software Development and Optimization
      </a>
     </li>
     <li class="">
      <a href="03. Optimization Techniques.html">
       03. Optimization Techniques
      </a>
     </li>
     <li class="">
      <a href="04. Dead Code.html">
       04. Dead Code
      </a>
     </li>
     <li class="">
      <a href="05. Exercise Remove Dead Code.html">
       05. Exercise: Remove Dead Code
      </a>
     </li>
     <li class="">
      <a href="06. If Statements.html">
       06. If Statements
      </a>
     </li>
     <li class="">
      <a href="07. Exercise If Statements.html">
       07. Exercise: If Statements
      </a>
     </li>
     <li class="">
      <a href="08. For Loops.html">
       08. For Loops
      </a>
     </li>
     <li class="">
      <a href="09. Exercise For Loops.html">
       09. Exercise: For Loops
      </a>
     </li>
     <li class="">
      <a href="10. Intermediate Variables.html">
       10. Intermediate Variables
      </a>
     </li>
     <li class="">
      <a href="11. Exercise Intermediate Variables.html">
       11. Exercise: Intermediate Variables
      </a>
     </li>
     <li class="">
      <a href="12. Vector Storage.html">
       12. Vector Storage
      </a>
     </li>
     <li class="">
      <a href="13. Exercise Vector Storage.html">
       13. Exercise: Vector Storage
      </a>
     </li>
     <li class="">
      <a href="14. References.html">
       14. References
      </a>
     </li>
     <li class="">
      <a href="15. Exercise References.html">
       15. Exercise: References
      </a>
     </li>
     <li class="">
      <a href="16. Sebastian's Synchronization Story.html">
       16. Sebastian's Synchronization Story
      </a>
     </li>
     <li class="">
      <a href="17. Static Keyword.html">
       17. Static Keyword
      </a>
     </li>
     <li class="">
      <a href="18. Exercise Static Keyword.html">
       18. Exercise: Static Keyword
      </a>
     </li>
     <li class="">
      <a href="19. Speed Challenge.html">
       19. Speed Challenge
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
   </nav>
   <div id="content">
    <header class="container-fluild header">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <div class="align-items-middle">
         <button class="btn btn-toggle-sidebar" id="sidebarCollapse" type="button">
          <div>
          </div>
          <div>
          </div>
          <div>
          </div>
         </button>
         <h1 style="display: inline-block">
          03. Optimization Techniques
         </h1>
        </div>
       </div>
      </div>
     </div>
    </header>
    <main class="container">
     <div class="row">
      <div class="col-12">
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h1 id="overview-of-techniques-in-this-lesson">
          Overview of Techniques in this Lesson
         </h1>
         <p>
          Here is an overview of the techniques you will be learning and using to optimize C++ code. Refer back to this page as you work through the exercises and on the final project. Each of these techniques will be expanded further throughout the lesson.
         </p>
         <p>
          If you are wondering why we chose these techniques, it's because you can use all of them to optimize Andy's histogram filter code. This is not a comprehensive list of optimization techniques by any means; rather, practicing these techniques will get you thinking about your code from a new perspective. While your focus up until now has been on code implementation, now you will appreciate the consequences of your coding decisions.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="remove-dead-code">
          Remove Dead Code
         </h2>
         <p>
          When you write your code, you might end up with a chunk of code that is no longer used but still part of the program. Watch out for cases like these: remember that every line of code involves some work by the CPU and oftentimes a read or write to memory. Any unnecessary code could slow things down.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="avoid-extra-if-statements">
          Avoid Extra if Statements
         </h2>
         <p>
          Code with multiple branching if statements is oftentimes inefficient:
         </p>
         <pre><code class="c++ language-c++">int x = 5;
if (x &gt;= 5) {x = x + 1;}
if (x &lt; 5) {x = x - 1;}</code></pre>
         <p>
          You could transform the above code into if else statements, which avoids the CPU checking whether x is less than 5.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="avoid-nested-for-loops">
          Avoid Nested for Loops
         </h2>
         <p>
          A section of code like this:
         </p>
         <pre><code class="c++ language-c++">for (int i = 0; i &lt; 5; i++) {
   for (int j = 0; j &lt; 4; j++) {
         matrix[i][j];   
   } 
}</code></pre>
         <p>
          should look somewhat familiar. This is how you have been iterating over the values in a matrix. Sometimes you have no choice but to use a nested for loop; however, depending on the application, you might not need a nested for loop if you think about the problem in a different way. And instead of needing twenty iterations like in the above code, you might only need 9 or fewer iterations.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="avoid-creating-extra-variables">
          Avoid Creating Extra Variables
         </h2>
         <p>
          You'll see that Andy sometimes creates extra variables that aren't needed. For example,
         </p>
         <pre><code class="c++ language-c++">float x = 2;
float y = 7;
float z = 4;

float volume = x * y * z;

float volume_reciprocal = 1 / volume;</code></pre>
         <p>
          The volume variable isn't really necessary. You could calculate the reciprocal directly:
         </p>
         <pre><code class="c++ language-c++">volume_reciprocal = 1 / (x * y * z);</code></pre>
         <p>
          You might not get much of a performance boost; float variables are relatively efficient in C++. But imagine creating a new variable to hold a larger variable like a 2D vector. All of the extra memory writes will definitely slow things down.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="reserve-space-in-memory-for-vectors">
          Reserve Space in Memory for Vectors
         </h2>
         <p>
          You've been using 2D vectors to represent matrices. C++ vectors have a big benefit in terms of convenience; you can add new elements to the vector as needed. Arrays, on the other hand, have a fixed length that cannot be changed after declaring them.
         </p>
         <p>
          But this flexibility comes at a cost; C++ vectors are very inefficient in terms of execution time. In fact, programs that require speedy execution would generally not use C++ vectors and especially not big for loops to iterate through vectors; instead, programs are written to take advantage of
          <a href="https://en.wikipedia.org/wiki/Parallel_computing" rel="noopener noreferrer" target="_blank">
           parallel processing
          </a>
          on either the CPU or a GPU (graphics processing unit).
         </p>
         <p>
          When you declare and define a vector, the compiler reserves space in memory plus some extra bytes in case the vector expands. Once the vector's length expands past the reserved memory, the entire vector will get copied over to a different place in RAM with enough available space.
         </p>
         <p>
          That is very inefficient! In Andy's histogram filter code, you already know how large your vectors need to be because the robot world has a fixed number of grid spaces. If you reserve space for the vector, then you can avoid all of the extra memory reallocations as you expand the vector's length. The syntax is as simple as coding:
         </p>
         <pre><code class="c++ language-c++">std::vector&lt;int&gt; foo;
foo.reserve(15);</code></pre>
         <p>
          Now the foo vector is guaranteed to have enough space for holding fifteen integers.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="passing-variables-by-reference">
          Passing Variables by Reference
         </h2>
         <p>
          Whenever you call a function, C++ copies any input variables into memory even if those variables are already in memory. For fundamental data types like int, char, or float, this might not be a problem.
         </p>
         <p>
          But with variables that take up a more significant amount of space, such as vectors, the extra copying can slow down your programs.
         </p>
         <p>
          You'll learn how to pass variables by reference instead of by value. Passing by reference tells your function to use the variable directly in memory rather than copying the entire variable to memory over again.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="using-static">
          Using Static
         </h2>
         <p>
          In Andy's code, you'll see that he calculates certain vectors and values inside a function, but these values are always the same every time the function is called.
         </p>
         <p>
          Instead of calculating the variables over and over again, you can declare these variables as static. When the function is called the first time, C++ stores the values in memory and re-uses the values every time the function is called.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="next-part-of-the-lecture">
          Next Part of the Lecture
         </h2>
         <p>
          The next part of the lessons has a series of exercises that will get you ready for the project. In each exercise, you will receive code that has one of the issues discussed on this page. And then you will change the code to get the program to run faster.
         </p>
         <p>
          You'll see that every time you run the code, the timer gives slightly different results; when you run your C++ program, the CPU might be carrying out other tasks that could affect timing. Be sure to execute your code multiple times to convince yourself that your code is (or isn't) running faster.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
      </div>
      <div class="col-12">
       <p class="text-right">
        <a class="btn btn-outline-primary mt-4" href="04. Dead Code.html" role="button">
         Next Concept
        </a>
       </p>
      </div>
     </div>
    </main>
    <footer class="footer">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <p class="text-center">
         udacity2.0 If you need the newest courses Plase add me wechat: udacity6
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script src="../assets/js/jquery-3.3.1.min.js">
  </script>
  <script src="../assets/js/plyr.polyfilled.min.js">
  </script>
  <script src="../assets/js/bootstrap.min.js">
  </script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js">
  </script>
  <script src="../assets/js/katex.min.js">
  </script>
  <script>
   // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('03. Optimization Techniques')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
 </body>
</html>
