<!-- udacimak v1.4.4 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <title>
   Credit Assignment
  </title>
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../assets/css/plyr.css" rel="stylesheet"/>
  <link href="../assets/css/katex.min.css" rel="stylesheet"/>
  <link href="../assets/css/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <link href="../assets/css/styles.css" rel="stylesheet"/>
  <link href="../assets/img/udacimak.png" rel="shortcut icon" type="image/png">
  </link>
 </head>
 <body>
  <div class="wrapper">
   <nav id="sidebar">
    <div class="sidebar-header">
     <h3>
      Proximal Policy Optimization
     </h3>
    </div>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled components">
     <li class="">
      <a href="01. Instructor Introduction.html">
       01. Instructor Introduction
      </a>
     </li>
     <li class="">
      <a href="02. Lesson Preview.html">
       02. Lesson Preview
      </a>
     </li>
     <li class="">
      <a href="03. Beyond REINFORCE.html">
       03. Beyond REINFORCE
      </a>
     </li>
     <li class="">
      <a href="04. Noise Reduction.html">
       04. Noise Reduction
      </a>
     </li>
     <li class="">
      <a href="05. Credit Assignment.html">
       05. Credit Assignment
      </a>
     </li>
     <li class="">
      <a href="06. Policy Gradient Quiz.html">
       06. Policy Gradient Quiz
      </a>
     </li>
     <li class="">
      <a href="07. pong with REINFORCE (code walkthrough).html">
       07. pong with REINFORCE (code walkthrough)
      </a>
     </li>
     <li class="">
      <a href="08. pong with REINFORCE (workspace).html">
       08. pong with REINFORCE (workspace)
      </a>
     </li>
     <li class="">
      <a href="09. Importance Sampling.html">
       09. Importance Sampling
      </a>
     </li>
     <li class="">
      <a href="10. PPO part 1- The Surrogate Function.html">
       10. PPO part 1- The Surrogate Function
      </a>
     </li>
     <li class="">
      <a href="11. PPO part 2- Clipping Policy Updates.html">
       11. PPO part 2- Clipping Policy Updates
      </a>
     </li>
     <li class="">
      <a href="12. PPO summary.html">
       12. PPO summary
      </a>
     </li>
     <li class="">
      <a href="13. pong with PPO (code walkthrough).html">
       13. pong with PPO (code walkthrough)
      </a>
     </li>
     <li class="">
      <a href="14. pong with PPO (workspace).html">
       14. pong with PPO (workspace)
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
   </nav>
   <div id="content">
    <header class="container-fluild header">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <div class="align-items-middle">
         <button class="btn btn-toggle-sidebar" id="sidebarCollapse" type="button">
          <div>
          </div>
          <div>
          </div>
          <div>
          </div>
         </button>
         <h1 style="display: inline-block">
          05. Credit Assignment
         </h1>
        </div>
       </div>
      </div>
     </div>
    </header>
    <main class="container">
     <div class="row">
      <div class="col-12">
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h1 id="credit-assignment">
          Credit Assignment
         </h1>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
         <p>
          Credit Assignment
         </p>
        </h3>
        <video controls="">
         <source src="05. Credit Assignment-tfZw1moB25Y.mp4" type="video/mp4"/>
         <track default="true" kind="subtitles" label="en" src="05. Credit Assignment-tfZw1moB25Y.en.vtt" srclang="en"/>
        </video>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          Going back to the gradient estimate, we can take a closer look at the total reward
          <span class="mathquill ud-math">
           R
          </span>
          , which is just a sum of reward at each step
          <span class="mathquill ud-math">
           R=r_1+r_2+…+r_{t-1}+r_t+…
          </span>
         </p>
         <div class="mathquill">
          g=\sum_t (...+r_{t-1}+r_{t}+...)\nabla_{\theta}\log \pi_\theta(a_t|s_t)
         </div>
         <p>
          Let’s think about what happens at time-step
          <span class="mathquill ud-math">
           t
          </span>
          . Even before an action is decided, the agent has already received all the rewards up until step
          <span class="mathquill ud-math">
           t-1
          </span>
          . So we can think of that part of the total reward as the reward from the past. The rest is denoted as the future reward.
         </p>
         <div class="mathquill">
          (\overbrace{...+r_{t-1}}^{\cancel{R^{\rm past}_t}}+
\overbrace{r_{t}+...}^{R^{\rm future}_t})
         </div>
         <p>
          Because we have a Markov process, the action at time-step
          <span class="mathquill ud-math">
           t
          </span>
          can only affect the future reward, so the past reward shouldn’t be contributing to the policy gradient.
          <br/>
          So to properly assign credit to the action
          <span class="mathquill ud-math">
           a_t
          </span>
          , we should ignore the past reward. So a better policy gradient would simply have the future reward as the coefficient .
         </p>
         <div class="mathquill">
          g=\sum_t R_t^{\rm future}\nabla_{\theta}\log \pi_\theta(a_t|s_t)
         </div>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="notes-on-gradient-modification">
          Notes on Gradient Modification
         </h2>
         <p>
          You might wonder, why is it okay to just change our gradient? Wouldn't that change our original goal of maximizing the expected reward?
         </p>
         <p>
          It turns out that mathematically, ignoring past rewards might change the gradient for each specific trajectory, but it doesn't change the
          <strong>
           averaged
          </strong>
          gradient. So even though the gradient is different during training, on average we are still maximizing the average reward. In fact, the resultant gradient is less noisy, so training using future reward should speed things up!
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
      </div>
      <div class="col-12">
       <p class="text-right">
        <a class="btn btn-outline-primary mt-4" href="06. Policy Gradient Quiz.html" role="button">
         Next Concept
        </a>
       </p>
      </div>
     </div>
    </main>
    <footer class="footer">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <p class="text-center">
         udacity2.0 If you need the newest courses Plase add me wechat: udacity6
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script src="../assets/js/jquery-3.3.1.min.js">
  </script>
  <script src="../assets/js/plyr.polyfilled.min.js">
  </script>
  <script src="../assets/js/bootstrap.min.js">
  </script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js">
  </script>
  <script src="../assets/js/katex.min.js">
  </script>
  <script>
   // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('05. Credit Assignment')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
 </body>
</html>
